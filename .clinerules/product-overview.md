# BooklightAI プロジェクト定義

## プロジェクト概要

BooklightAIは、Kindleのハイライト情報を自動的に収集し、AI技術を活用して管理・分析するシステムです。ユーザーの読書体験を強化し、ハイライトした情報を効率的に活用するための総合的なプラットフォームを提供します。主な目標は、読書中に作成したハイライトを簡単に保存・検索でき、AIを用いて新しい視点から読書内容を深く理解できるようにすることです。

## 主な機能と要件

### ハイライト収集と管理
- Chromeエクステンションを使ってKindle Web Readerからハイライトを自動収集
- オフラインモードでのハイライト収集と同期機能
- ユーザーごとのハイライト管理

### AI機能
- 自然言語検索によるハイライト検索
- AIによる書籍サマリー自動生成
- ハイライトコンテンツに基づいたAIチャット機能

### ユーザー管理
- Google OAuth認証によるログイン
- ユーザー固有のデータ管理
- マルチデバイス対応

### データ管理
- 書籍ごとのハイライト表示
- ハイライトのインポート/エクスポート
- データベースとファイルベースの両方でのデータ管理（後方互換性）

## システムアーキテクチャ

### バックエンド
- **言語/フレームワーク**: Python, FastAPI
- **データベース**: PostgreSQL (Herokuデプロイ時), SQLite (開発時)
- **ORM**: SQLAlchemy
- **認証**: JWT, Google OAuth2.0
- **マイグレーション**: Alembic

### フロントエンド
- **フレームワーク**: Streamlit
- **ページ構成**:
  - ホームページ
  - 検索モード
  - チャットモード
  - 書籍一覧
  - ハイライトアップロード

### Chromeエクステンション
- **言語**: JavaScript
- **主要ファイル**:
  - background.js (バックグラウンドスクリプト)
  - content.js (コンテンツスクリプト)
  - popup.js/html (UIインターフェース)

### AI機能
- **API**: OpenAI API (GPT-3.5 & GPT-4)
- **フレームワーク**: LangChain
- **埋め込み**: OpenAI Embeddings
- **ベクトルストア**: ChromaDB
- **検索アルゴリズム**: ハイブリッド検索 (ベクトル検索 + BM25)

## 制約と前提条件

- Kindleハイライト機能に依存
- Kindle Web ReaderのDOM構造に依存
- Google認証を利用するため、インターネット接続が必要
- APIキー（OpenAI）が必要
- Herokuでのデプロイを前提とした設定

## デプロイ環境

### Heroku設定
- PostgreSQLデータベース連携
- 環境変数の適切な設定
- リダイレクトURL自動検出機能
- カスタムドメイン対応

### セキュリティ
- ベーシック認証による.envファイルなどの保護
- JWTによる認証管理
- OAuth2.0によるセキュアな認証フロー
- HTTPS通信の強制（Heroku環境）

## 開発状況

### 完了している機能
- FastAPIバックエンドの基本実装
- Chromeエクステンションの基本機能
- データベース連携
- Google OAuth認証
- ハイライト収集機能
- AI検索・チャット機能
- 書籍サマリー生成機能

### 今後の開発予定
- Kindle以外のプラットフォーム対応
- UI/UXの改善
- タグ付け機能の強化
- パフォーマンス最適化
- モバイル対応の強化

## 参考ドキュメント

プロジェクトには以下のドキュメントが含まれています：
- README.md: プロジェクト概要
- IMPLEMENTATION_STATUS.md: 実装状況の詳細
- USER_MANUAL.md: ユーザーマニュアル
- TEST_PLAN.md: テスト計画
- HEROKU_DEPLOYMENT.md: Herokuデプロイガイド

## プロジェクト構造